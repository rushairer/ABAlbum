{"metadata":{"title":"创建选择“相册”的页面","categoryPathComponent":"ABAlbum","role":"project","category":"ABAlbum"},"hierarchy":{"modules":[{"reference":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/-------","projects":[{"reference":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Create-Album-Selector-View","sections":[{"kind":"task","reference":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Create-Album-Selector-View#CellView-Cell"},{"kind":"task","reference":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Create-Album-Selector-View#GridView-Cell"}]},{"reference":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Get-Albums-Using-PhotoKit","sections":[{"kind":"task","reference":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Get-Albums-Using-PhotoKit#text"}]}]}],"reference":"doc:\/\/ABAlbum\/tutorials\/ABAlbum","paths":[["doc:\/\/ABAlbum\/tutorials\/ABAlbum","doc:\/\/ABAlbum\/tutorials\/ABAlbum\/$volume","doc:\/\/ABAlbum\/tutorials\/ABAlbum\/-------"]]},"schemaVersion":{"major":0,"minor":1,"patch":0},"kind":"project","identifier":{"url":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Create-Album-Selector-View","interfaceLanguage":"swift"},"sections":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"选择“相册”的页面，我们给它起个名字“AlbumSelectorGridView”，然后一步步展开吧。"}]}],"estimatedTimeInMinutes":10,"title":"创建选择“相册”的页面","image":"background-image.jpg","chapter":"第一次打开相册","kind":"hero","backgroundImage":"background-image.jpg"},{"kind":"tasks","tasks":[{"anchor":"CellView-Cell","title":"CellView - 每个相册对应一个Cell视图","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"通过分析学习系统的Photos应用，我们可以看到，选择“相册”的页面是一个网格视图，由很多Cell视图组成。"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"那么接下来，我们先用SwiftUI实现Cell视图吧。"}]}],"mediaPosition":"trailing","media":"screenshot_01_01.png"}],"stepsSection":[{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"创建一个新的SwiftUI视图文件，并将其命名为：“AlbumSelectorGridCellView.swift”。"}]}],"caption":[],"type":"step","runtimePreview":null,"media":"create-swiftui-file.png"},{"code":"01-create-album-selector-view-01-01","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"图片做背景底图，把标题和相册内照片数量的文本框放底部对齐。VShack 和 HStack 可以用 Spacer 填充空白部分，把视图“撑起来”。"}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":"01-create-album-selector-view-01-02","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"设置变量和默认值。 加个边距和模糊背景效果。运行预览后，效果如图所示。"}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"emphasis","inlineContent":[{"type":"text","text":"相册示例照片来自：https:\/\/unsplash.com\/photos\/Yn0l7uwBrpw"}]}]}],"type":"step","runtimePreview":"screenshot_01_03.png","media":null}]},{"anchor":"GridView-Cell","title":"GridView - 使用Cell组成可滑动的网格","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"有了Cell之后，我们就可以把无数的Cell组成可以上下滑动的网格了。"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"为了避免Cell很多时产生的性能问题，我们使用 LazyVGrid。"}]}],"mediaPosition":"trailing","media":"screenshot_02_01.png"}],"stepsSection":[{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"创建一个新的SwiftUI视图文件，并将其命名为：“AlbumSelectorGridView.swift”。"}]}],"caption":[],"type":"step","runtimePreview":null,"media":"create-swiftui-file.png"},{"code":"01-create-album-selector-view-02-01","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"把 ScrollView 设为 "},{"type":"emphasis","inlineContent":[{"type":"text","text":".vertical"}]},{"type":"text","text":"， 包裹 LazyVGrid。设置GridItem样式。填充100个AlbumSelectorGridCellView。"}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"效果如图。"}]}],"type":"step","runtimePreview":"screenshot_02_02.png","media":null},{"code":"01-create-album-selector-view-02-02","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"调整一下代码。"}]}],"caption":[],"type":"step","runtimePreview":null,"media":null},{"code":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"简单两步，我们的相册选择页面就做好了。可是如何真正地从系统图库拿到相册数据呢？别着急，请继续看我们后续的内容。"}]}],"caption":[],"type":"step","runtimePreview":null,"media":"screenshot_02_01.png"}]}]},{"action":{"overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"isActive":true,"type":"reference","identifier":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Get-Albums-Using-PhotoKit","overridingTitle":"Get started"},"featuredEyebrow":"Tutorial","kind":"callToAction","title":"从系统图库中读取相册信息","abstract":[{"type":"text","text":"目前为止，我们只是实现了相册选择页的效果，内容是填充的模拟数据。如何真正地从系统图库读取相册信息呢？让我们开始下面的内容吧。"}]}],"references":{"doc://ABAlbum/tutorials/ABAlbum/-------":{"role":"article","title":"第一次打开相册","abstract":[],"identifier":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/-------","kind":"article","type":"topic","url":"\/tutorials\/abalbum\/-------"},"doc://ABAlbum/tutorials/ABAlbum/Create-Album-Selector-View#GridView-Cell":{"role":"pseudoSymbol","title":"GridView - 使用Cell组成可滑动的网格","abstract":[{"type":"text","text":"选择“相册”的页面，我们给它起个名字“AlbumSelectorGridView”，然后一步步展开吧。"}],"identifier":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Create-Album-Selector-View#GridView-Cell","kind":"section","type":"section","url":"\/tutorials\/abalbum\/create-album-selector-view#GridView-Cell"},"background-image.jpg":{"alt":"","type":"image","identifier":"background-image.jpg","variants":[{"url":"\/images\/background-image.jpg","size":{"width":640,"height":427},"traits":["1x","light"]}]},"doc://ABAlbum/tutorials/ABAlbum":{"role":"overview","title":"ABAlbum的故事","abstract":[{"type":"text","text":"从零开始，记录ABAlbum的开发过程。"},{"type":"text","text":" "},{"type":"text","text":"会不定期的更新，慢慢来，让我们一起成长进步吧。"}],"identifier":"doc:\/\/ABAlbum\/tutorials\/ABAlbum","kind":"overview","type":"topic","url":"\/tutorials\/abalbum"},"01-create-album-selector-view-01-01":{"syntax":"swift","content":["import SwiftUI","","struct AlbumSelectorGridCellView: View {","    var body: some View {","        VStack(alignment: .leading) {","            Spacer()","            HStack {","                Text(\"Untitled\")","                Spacer()","                Text(\"0\").font(.footnote).foregroundColor(.secondary)","            }","        }","        .background(","            Image(\"photo_demo\", bundle: .module)","        )","    }","}","","struct AlbumSelectorGridCellView_Previews: PreviewProvider {","    static var previews: some View {","        AlbumSelectorGridCellView()","    }","}"],"fileName":"AlbumSelectorGridCellView.swift","identifier":"01-create-album-selector-view-01-01","type":"file","fileType":"swift","highlights":[]},"create-swiftui-file.png":{"alt":"","type":"image","identifier":"create-swiftui-file.png","variants":[{"url":"\/images\/create-swiftui-file.png","size":{"width":1460,"height":1040},"traits":["1x","light"]}]},"doc://ABAlbum/tutorials/ABAlbum/Get-Albums-Using-PhotoKit":{"role":"project","title":"从系统图库中读取相册信息","estimatedTime":"20分钟","abstract":[{"type":"text","text":"目前为止，我们只是实现了相册选择页的效果，内容是填充的模拟数据。如何真正地从系统图库读取相册信息呢？让我们开始下面的内容吧。"}],"identifier":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Get-Albums-Using-PhotoKit","kind":"project","type":"topic","url":"\/tutorials\/abalbum\/get-albums-using-photokit"},"01-create-album-selector-view-01-02":{"syntax":"swift","content":["import SwiftUI","","struct AlbumSelectorGridCellView: View {","    var image: Image?","    var title: String?","    var count: Int?","    var body: some View {","        VStack(alignment: .leading) {","            Spacer()","            HStack {","                Text(title ?? \"Untitled\")","                Spacer()","                Text(\"\\(count ?? 0)\").font(.footnote).foregroundColor(.secondary)","            }","            .padding(10)","            .background(.thinMaterial)","        }","        .background(","            image ?? Image(\"photo_demo\", bundle: .module)","        )","    }","}","","struct AlbumSelectorGridCellView_Previews: PreviewProvider {","    static var previews: some View {","        Group {","            AlbumSelectorGridCellView()","                .preferredColorScheme(.dark)","                .previewLayout(.sizeThatFits)","                .frame(width: 200.0, height: 200.0)","            AlbumSelectorGridCellView()","                .preferredColorScheme(.light)","                .previewLayout(.sizeThatFits)","                .frame(width: 200.0, height: 200.0)","        }","    }","}"],"fileName":"AlbumSelectorGridCellView.swift","identifier":"01-create-album-selector-view-01-02","type":"file","fileType":"swift","highlights":[{"line":4},{"line":5},{"line":6},{"line":11},{"line":13},{"line":15},{"line":16},{"line":19},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35}]},"screenshot_02_02.png":{"alt":"","type":"image","identifier":"screenshot_02_02.png","variants":[{"url":"\/images\/screenshot_02_02.png","size":{"width":1021,"height":1852},"traits":["1x","light"]}]},"doc://ABAlbum/tutorials/ABAlbum/Get-Albums-Using-PhotoKit#text":{"role":"pseudoSymbol","title":"<#text#>","abstract":[{"type":"text","text":"目前为止，我们只是实现了相册选择页的效果，内容是填充的模拟数据。如何真正地从系统图库读取相册信息呢？让我们开始下面的内容吧。"}],"identifier":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Get-Albums-Using-PhotoKit#text","kind":"section","type":"section","url":"\/tutorials\/abalbum\/get-albums-using-photokit#text"},"screenshot_01_01.png":{"alt":"","type":"image","identifier":"screenshot_01_01.png","variants":[{"url":"\/images\/screenshot_01_01.png","size":{"width":1284,"height":2778},"traits":["1x","light"]}]},"doc://ABAlbum/tutorials/ABAlbum/Create-Album-Selector-View":{"role":"project","title":"创建选择“相册”的页面","estimatedTime":"10分钟","abstract":[{"type":"text","text":"选择“相册”的页面，我们给它起个名字“AlbumSelectorGridView”，然后一步步展开吧。"}],"identifier":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Create-Album-Selector-View","kind":"project","type":"topic","url":"\/tutorials\/abalbum\/create-album-selector-view"},"01-create-album-selector-view-02-01":{"syntax":"swift","content":["import SwiftUI","","struct AlbumSelectorGridView: View {","    ","    private let maxColumn: CGFloat = 2","    private let gridSpacing: CGFloat = 8","    private let gridCornerRadius: CGFloat = 8","    ","    private func gridWidth() -> CGFloat {","        let screenSize = UIScreen.main.bounds.size","        return floor((min(screenSize.width, screenSize.height) - gridSpacing * (maxColumn + 1)) \/ maxColumn)","    }","    ","    var body: some View {","        ScrollView(.vertical) {","            LazyVGrid(columns: [","                GridItem(.adaptive(minimum: gridWidth(), maximum: gridWidth()), spacing: gridSpacing)","            ]) {","                ForEach(0..<100) { index in","                    AlbumSelectorGridCellView()","                        .frame(width: gridWidth(), height: gridWidth())","                }","            }","        }","    }","}","","struct AlbumSelectorGridView_Previews: PreviewProvider {","    static var previews: some View {","        AlbumSelectorGridView()","    }","}"],"fileName":"AlbumSelectorGridView.swift","identifier":"01-create-album-selector-view-02-01","type":"file","fileType":"swift","highlights":[]},"01-create-album-selector-view-02-02":{"syntax":"swift","content":["import SwiftUI","","struct AlbumSelectorGridView: View {","    ","    private let maxColumn: CGFloat = 2","    private let gridSpacing: CGFloat = 8","    private let gridCornerRadius: CGFloat = 8","    ","    private func gridWidth(screenSize: CGSize) -> CGFloat {","        return floor((min(screenSize.width, screenSize.height) - gridSpacing * (maxColumn + 1)) \/ maxColumn)","    }","    ","    var body: some View {","        func internalView(geometry: GeometryProxy) -> some View {","            let width = gridWidth(screenSize: geometry.size)","","            return ScrollView(.vertical) {","                LazyVGrid(columns: [","                    GridItem(.adaptive(minimum: width, maximum: width), spacing: gridSpacing)","                ]) {","                    ForEach(0..<100) { index in","                        AlbumSelectorGridCellView()","                            .frame(width: width, height: width)","                    }","                }","            }","        }","        return GeometryReader(content: internalView(geometry:))","    }","}","","struct AlbumSelectorGridView_Previews: PreviewProvider {","    static var previews: some View {","        AlbumSelectorGridView()","    }","}"],"fileName":"AlbumSelectorGridView.swift","identifier":"01-create-album-selector-view-02-02","type":"file","fileType":"swift","highlights":[{"line":9},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":28}]},"screenshot_02_01.png":{"alt":"","type":"image","identifier":"screenshot_02_01.png","variants":[{"url":"\/images\/screenshot_02_01.png","size":{"width":1284,"height":2778},"traits":["1x","light"]}]},"screenshot_01_03.png":{"alt":"","type":"image","identifier":"screenshot_01_03.png","variants":[{"url":"\/images\/screenshot_01_03.png","size":{"width":931,"height":1854},"traits":["1x","light"]}]},"doc://ABAlbum/tutorials/ABAlbum/Create-Album-Selector-View#CellView-Cell":{"role":"pseudoSymbol","title":"CellView - 每个相册对应一个Cell视图","abstract":[{"type":"text","text":"选择“相册”的页面，我们给它起个名字“AlbumSelectorGridView”，然后一步步展开吧。"}],"identifier":"doc:\/\/ABAlbum\/tutorials\/ABAlbum\/Create-Album-Selector-View#CellView-Cell","kind":"section","type":"section","url":"\/tutorials\/abalbum\/create-album-selector-view#CellView-Cell"}}}